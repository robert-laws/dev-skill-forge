---
interface CaseStudy {
  title: string;
  context: string;
  challenge: string;
  actions: string[];
  result: string;
  screenshot?: {
    src: string;
    alt: string;
    caption: string;
  };
}

interface Props {
  caseStudy?: CaseStudy;
}

const { caseStudy } = Astro.props;
const withBase = (pathname: string) => `${import.meta.env.BASE_URL}${pathname.replace(/^\//, '')}`;
---

{
  caseStudy && (
    <section class="section-block panel">
      <h2 class="section-title compact">Real-World Case Study</h2>
      <p><strong>{caseStudy.title}</strong></p>
      <p><strong>Context:</strong> {caseStudy.context}</p>
      <p><strong>Challenge:</strong> {caseStudy.challenge}</p>
      <p><strong>Actions Taken:</strong></p>
      <ul class="content-list">
        {caseStudy.actions.map((action) => (
          <li>{action}</li>
        ))}
      </ul>
      <p><strong>Result:</strong> {caseStudy.result}</p>
      {
        caseStudy.screenshot && (
          <figure class="case-study-shot">
            <img
              src={withBase(caseStudy.screenshot.src)}
              alt={caseStudy.screenshot.alt}
              loading="lazy"
              decoding="async"
            />
            <figcaption>{caseStudy.screenshot.caption}</figcaption>
          </figure>
        )
      }
    </section>
  )
}
