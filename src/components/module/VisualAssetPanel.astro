---
interface VisualAsset {
  src: string;
  alt: string;
  caption: string;
}

interface Props {
  visualAsset?: VisualAsset;
}

const { visualAsset } = Astro.props;
const withBase = (pathname: string) => `${import.meta.env.BASE_URL}${pathname.replace(/^\//, '')}`;
---

{
  visualAsset && (
    <section class="section-block panel">
      <h2 class="section-title compact">Visual Reference</h2>
      <figure class="module-figure">
        <img src={withBase(visualAsset.src)} alt={visualAsset.alt} loading="lazy" decoding="async" />
        <figcaption>{visualAsset.caption}</figcaption>
      </figure>
    </section>
  )
}
